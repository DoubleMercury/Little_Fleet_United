<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <title>Little Fleet United!</title>
    <style>
        #headers {
            font-family: "Open Sans";
            color: #758692
        }
    </style>
</head>
<body>

    <!--Rented Column-->
    <div class="columns">
        <div class="column">
            <h3 id="headers" class="is-size-1 has-text-centered"><strong>Rented Fleet</strong></h3>
                <div class="box">
                    <ul id="carList" class="list-item"></ul>
                </div>
        </div>
        <!--Available Column-->
        <div class="column">
            <h3 id="headers" class="is-size-1 has-text-centered"><strong>Available Cars Only</strong></h3>
                <div class="box">
                    <ul id="availableList" class="list-item"></ul>
                </div>
        </div>

    </div>
        <!--Home button-->
<div class="container has-text-centered">
    <a href="/">
        <button class="is-primary is-size-1">
          <span class="fa fa-home"></span>
          Back to Home
        </button>
      </a>
    </div>
    <!--Footer-->
<footer class="footer">
        <div class="container">
          <p><a href="/api/fleet">API Fleet Link</a> | <a href="/api/available">API Available Cars</a>
        </div>      
</footer>
</body>



<script type="text/javascript">
    function runFleetQuery() {
        
        $.ajax({url: "/api/fleet", method: "GET"})
            .then(function(fleetData){
                
            for (var i = 0; i < fleetData.length; i++) {
                var carList = $("#carList");
                var listItem = $("<li class='list-item'>");

                listItem.append(
                    $("<h6>").text("Status: " + fleetData[i].carStatus),
                    $("<hr>"),
                    $("<h6>").text("ID: " + fleetData[i].carID),
                    $("<h6>").text("Make: " + fleetData[i].carMake),
                    $("<h6>").text("Model: " + fleetData[i].carModel),
                    $("<h6>").text("Year: " + fleetData[i].carYear),
                    $("<h6>").text("# of Seats: " + fleetData[i].seatNumber),
                    $("<h6>").text("Price per Day: " + fleetData[i].pricePerDay),
                    $("<h6>").text("Rented Date From: " + fleetData[i].dateFrom),
                    $("<h6>").text("Rented Date To: " + fleetData[i].dateTo)    
                    );
                carList.append(listItem);
                }
            });
    }

    function runAvailableQuery() {
        $.ajax({url: "/api/available", method: "GET"})
            .then(function (availableData) {

            for (var i=0; i <availableData.length; i++) {
                var availableList = $("#availableList")
                var listItem = $("<li class='list-item'>");

                listItem.append(
                    $("<h6>").text("Status: " + availableData[i].carStatus),
                    $("<h6>").text("ID: " + availableData[i].carID),
                    $("<h6>").text("Make: " + availableData[i].carMake),
                    $("<h6>").text("Model: " + availableData[i].carModel),
                    $("<h6>").text("Year: " + availableData[i].carYear),
                    $("<h6>").text("# of Seats: " + availableData[i].seatNumber),
                    $("<h6>").text("Price per Day: " + availableData[i].pricePerDay),
                    $("<h6>").text("Rented Date From: " + availableData[i].dateFrom),
                    $("<h6>").text("Rented Date To: " + availableData[i].dateTo)    
                    );
                availableList.append(listItem);
                }
            });
    }

//Run Queries:
runFleetQuery();
runAvailableQuery();
</script>
</html>